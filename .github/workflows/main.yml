name: espidf CI

on: [push]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - name: Checkout repo
      uses: actions/checkout@v2
      with:
        submodules: 'recursive'

    - name: Create build container
      run: docker build -f .gitpod.Dockerfile -t roboprog-dev-container

    - name: Build
      run: docker run -v $PWD:/srv -w/srv roboprog-dev-container idf.py build
