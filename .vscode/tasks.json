{
   // See https://go.microsoft.com/fwlink/?LinkId=733558
   // for the documentation about the tasks.json format
   "version": "2.0.0",
   "tasks": [
      {
         "label": "build qemu",
         "type": "shell",
         "command": "platformio run -t qemu-image -e esp32dev_qemu",
         "problemMatcher": {
            "owner": "cpp",
            "fileLocation": ["relative", "${workspaceFolder}"],
            "pattern": {
              "regexp": "^(.*):(\\d+):(\\d+):\\s+(warning|error):\\s+(.*)$",
              "file": 1,
              "line": 2,
              "column": 3,
              "severity": 4,
              "message": 5
            }
          }
         },
      {
         "label": "run qemu - without gdb",
         "type": "shell",
         "command": "${env:HOME}/qemu/bin/qemu-system-xtensa -nographic -M esp32 -m 4 -drive file=${workspaceRoot}/.pio/build/esp32dev_qemu/qemu_image.bin,if=mtd,format=raw -nic user,model=open_eth,hostfwd=tcp::7654-:80 -global driver=timer.esp32.timg,property=wdt_disable,value=true",
         },
         {
            "label": "run qemu - wait for gdb",
            "type": "shell",
            "command": "${env:HOME}/qemu/bin/qemu-system-xtensa -nographic -M esp32 -m 4 -drive file=${workspaceRoot}/.pio/build/esp32dev_qemu/qemu_image.bin,if=mtd,format=raw -nic user,model=open_eth,hostfwd=tcp::7654-:80 -s -S -global driver=timer.esp32.timg,property=wdt_disable,value=true",
            },
         {
         "label": "run qemu - serial pts (for gdb attach after panic)",
         "type": "shell",
         "command": "${env:HOME}/qemu/bin/qemu-system-xtensa -nographic -M esp32 -m 4 -drive file=${workspaceRoot}/.pio/build/esp32dev_qemu/qemu_image.bin,if=mtd,format=raw -nic user,model=open_eth,hostfwd=tcp::7654-:80 -global driver=timer.esp32.timg,property=wdt_disable,value=true -serial pty",
      }
   ]
}